{{- if (eq .chezmoi.os "darwin") -}}
#!/bin/bash

set -eufo pipefail

taps=(
	omair-inam/tap
)

formulae=(
	age
	bat
	docker
	eza
	fzf
	gh
	jq
	mas
	nvm
	pipx
	pyenv
 	tealdeer
	tree
	wget
	yarn
	zsh-syntax-highlighting
	zoxide
)
casks=(
	battery
	beyond-compare-4
	chatgpt
	cleanshot
	clickup
	craft
	forklift3
	intellij-idea
	iterm2
	logi-options-plus
	meetingbar
	microsoft-remote-desktop
	pycharm
	qbserve
	raycast
	rectangle-pro
	signal
	slack
	tower
	visual-studio-code
	whatsapp
	zoom
)

{{ if .personal_device}}
	casks+=(
		discord
		steam
	)	
{{ end }}

{{ if .work_device }}
	formulae+=(
		docker
		go
		mitmproxy
		rancher
		TomAnthony/brews/itermocil
		x3270
	)
	casks+=(
		hex-fiend
		p4v
		postman
		stats
	)
{{ end }}

# Install taps
for tap in "${taps[@]}"; do
    brew tap "$tap"
done

brew update

brew install ${formulae[@]}
brew install --cask ${casks[@]}

brew bundle --no-lock --file=/dev/stdin << Brewfile
mas "Yubico Authenticator", id: 1497506650
mas "Things 3", id: 904280696
Brewfile

brew cleanup
{{ end }}